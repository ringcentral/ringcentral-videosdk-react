{"version":3,"file":"useVideoDevices.daf324ea.js","sources":["../../node_modules/.pnpm/@mui+icons-material@5.11.9_smgofu3xpswo6tnze3x7f66ybq/node_modules/@mui/icons-material/esm/Videocam.js","../../lib/hooks/useVideoDevices.tsx"],"sourcesContent":["import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z\"\n}), 'Videocam');","import { useEffect, useState } from 'react';\nimport { useGlobalContext } from '@provider';\nimport { VideoDeviceManagerEvent } from '@ringcentral/video-sdk';\n\nconst useVideoDevices = ()=>{\n    const { rcvEngine } = useGlobalContext();\n    const [videoDeviceList, setVideoDeviceList] = useState<MediaDeviceInfo[]>([]);\n    const [videoActiveDevice, setVideoActiveDevice] = useState('');\n\n    useEffect(() => {\n        let offVideoDeviceList: any;\n        let offVideoDevice: any;\n        if (rcvEngine) {\n            const videoDeviceManager = rcvEngine.getVideoDeviceManager();\n            videoDeviceManager.enumerateVideoDevices().then(initVideoDevices);\n            offVideoDeviceList = videoDeviceManager.on(VideoDeviceManagerEvent.VIDEO_DEVICE_LIST_UPDATED, setVideoDeviceList);\n            offVideoDevice = videoDeviceManager.on(VideoDeviceManagerEvent.VIDEO_DEVICE_CHANGED, setVideoActiveDevice);\n        }\n        return () => {\n            offVideoDeviceList&&offVideoDeviceList();\n            offVideoDevice&&offVideoDevice();\n        };\n    }, [rcvEngine]);\n\n    const initVideoDevices = async(devices) => {\n        if (!devices.length) return;\n        setVideoDeviceList(devices);\n        const deviceId = devices[0].deviceId;\n        setVideoActiveDevice(deviceId);\n    };\n\n    return [videoDeviceList, videoActiveDevice] as const;\n};\n\nexport default useVideoDevices;\n"],"names":["Videocam","createSvgIcon","_jsx","useVideoDevices","rcvEngine","useGlobalContext","videoDeviceList","setVideoDeviceList","useState","videoActiveDevice","setVideoActiveDevice","useEffect","offVideoDeviceList","offVideoDevice","videoDeviceManager","getVideoDeviceManager","enumerateVideoDevices","then","initVideoDevices","on","VideoDeviceManagerEvent","VIDEO_DEVICE_LIST_UPDATED","VIDEO_DEVICE_CHANGED","__name","devices","length","deviceId"],"mappings":"0LAEA,MAAAA,EAAeC,EAA4BC,EAAK,OAAQ,CACtD,EAAG,uGACL,CAAC,EAAG,UAAU,ECARC,EAAkBA,EAAAA,IAAI,CAClB,KAAA,CAAEC,UAAAA,GAAcC,EAAkB,EAClC,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,QAAAA,SAA4B,CAAE,CAAA,EACtE,CAACC,EAAmBC,CAAoB,EAAIF,mBAAS,EAAE,EAE7DG,EAAAA,QAAAA,UAAU,IAAM,CACRC,IAAAA,EACAC,EACJ,GAAIT,EAAW,CACLU,MAAAA,EAAqBV,EAAUW,wBAClBC,EAAAA,sBAAAA,EAAwBC,KAAKC,CAAgB,EAChEN,EAAqBE,EAAmBK,GAAGC,EAAwBC,QAAAA,wBAAAA,0BAA2Bd,CAAkB,EAChHM,EAAiBC,EAAmBK,GAAGC,EAAwBE,QAAAA,wBAAAA,qBAAsBZ,CAAoB,CAC7G,CACA,MAAO,IAAM,CACTE,GAAoBA,EAAoB,EACxCC,GAAgBA,EAAgB,CAAA,CACpC,EACD,CAACT,CAAS,CAAC,EAERc,MAAAA,EAAmBK,EAAA,MAAMC,GAAY,CACvC,GAAI,CAACA,EAAQC,OAAQ,OACrBlB,EAAmBiB,CAAO,EACpBE,MAAAA,EAAWF,EAAQ,GAAGE,SAC5BhB,EAAqBgB,CAAQ,CAAA,EAJR,oBAOlB,MAAA,CAACpB,EAAiBG,CAAiB,CAC9C,EA5BwBN"}